{"ast":null,"code":"import 'ts-replace-all';\nconst initialHeader = {\n  GET: {},\n  POST(dataClient) {\n    return dataClient;\n  }\n};\nclass Repository {\n  constructor(token, isJWT) {\n    this.token = '';\n    this.header = initialHeader;\n    this.headerJWT = {\n      //Default JWT\n      GET: {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': \"Bearer: \" + this.token\n        }\n      },\n      POST: dataClient => {\n        return {\n          method: 'POST',\n          redirect: 'follow',\n          body: JSON.stringify(dataClient),\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            'Authorization': \"Bearer: \" + this.token\n          }\n        };\n      }\n    };\n    this.headerCookie = {\n      //Default JWT\n      GET: {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      },\n      POST: dataClient => {\n        return {\n          method: 'POST',\n          redirect: 'follow',\n          body: JSON.stringify(dataClient),\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          credentials: 'include'\n        };\n      }\n    };\n    this.postCommandAsync = async command => {\n      const urlAddOnServer = 'https://localhost:7145/command/add';\n      const dataClient = {\n        id: 0,\n        data: '',\n        textCommand: command\n      };\n      if (command !== '') {\n        await fetch(urlAddOnServer, this.header.POST(dataClient));\n      }\n    };\n    this.currnetDirectoryAsync = async () => {\n      const urlGetDirectory = 'https://localhost:7145/command/getDirectory';\n      const responce = await fetch(urlGetDirectory, this.header.GET);\n      return await responce.text();\n    };\n    this.subDirectoriesAsync = async () => {\n      const urlGetDirectories = 'https://localhost:7145/command/getDirectories';\n      const responce = await fetch(urlGetDirectories, this.header.GET);\n      const responceJson = await responce.json();\n      const result = await responceJson;\n      return result;\n    };\n    this.getHistoryAsync = async () => {\n      const urlGetHistory = 'https://localhost:7145/command/getHistory';\n      const response = await fetch(urlGetHistory, {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': this.token\n        },\n        credentials: 'include'\n      });\n      const responceJson = await response.json();\n      const result = await responceJson;\n      return result;\n    };\n    this.stopCommandAsync = async () => {\n      const urlStopCommand = 'https://localhost:7145/command/Stop';\n      await fetch(urlStopCommand, {\n        method: 'POST',\n        redirect: 'follow',\n        body: JSON.stringify(null),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': this.token\n        },\n        credentials: 'include'\n      });\n    };\n    this.token = token.replaceAll('\\\"', '');\n    if (isJWT) this.header = this.headerJWT;else this.header = this.headerCookie;\n  }\n}\nexport const instanceRepository = token => {\n  return new Repository(token);\n};","map":{"version":3,"names":["initialHeader","GET","POST","dataClient","Repository","constructor","token","isJWT","header","headerJWT","method","headers","redirect","body","JSON","stringify","headerCookie","credentials","postCommandAsync","command","urlAddOnServer","id","data","textCommand","fetch","currnetDirectoryAsync","urlGetDirectory","responce","text","subDirectoriesAsync","urlGetDirectories","responceJson","json","result","getHistoryAsync","urlGetHistory","response","stopCommandAsync","urlStopCommand","replaceAll","instanceRepository"],"sources":["C:/Project/ASP.Net/TestGit/webshell_front/src/Server/Command/Repository.tsx"],"sourcesContent":["import { IHistory } from '../../Console/Input/Interface/IHistory'\r\nimport 'ts-replace-all'\r\n\r\ntype HeaderRequest = {\r\n    GET: RequestInit,\r\n    POST: (dataClient : any) => RequestInit\r\n}\r\n\r\nconst initialHeader : HeaderRequest= {\r\n    GET: {},\r\n    POST(dataClient) {\r\n        return dataClient\r\n    },\r\n}\r\n\r\nclass Repository {\r\n    token = ''\r\n    header = initialHeader\r\n    headerJWT : HeaderRequest = { //Default JWT\r\n        GET: {\r\n            method: 'GET',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': \"Bearer: \" + this.token\r\n            },\r\n        },\r\n        POST: (dataClient : any) : RequestInit => {\r\n          return { method: 'POST',\r\n                redirect: 'follow',\r\n                body: JSON.stringify(dataClient),\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': \"Bearer: \" + this.token\r\n                },\r\n            }\r\n        } \r\n    }\r\n\r\n    headerCookie : HeaderRequest = { //Default JWT\r\n        GET: {\r\n            method: 'GET',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n            },\r\n            credentials: 'include'\r\n        },\r\n        POST: (dataClient : any) : RequestInit => {\r\n          return { \r\n                method: 'POST',\r\n                redirect: 'follow',\r\n                body: JSON.stringify(dataClient),\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                credentials: 'include'\r\n            }\r\n        } \r\n    }\r\n\r\n    constructor(token : string,isJWT :boolean){\r\n       this.token = token.replaceAll('\\\"','')\r\n       if(isJWT)\r\n            this.header = this.headerJWT;\r\n        else\r\n            this.header = this.headerCookie;\r\n    }\r\n\r\n    postCommandAsync = async (command : string) : Promise<void> => {\r\n        const urlAddOnServer = 'https://localhost:7145/command/add'\r\n        const dataClient = { id: 0, data: '', textCommand: command }\r\n        if (command !== '') {\r\n            await fetch(urlAddOnServer, this.header.POST(dataClient))\r\n        }\r\n    }\r\n\r\n    currnetDirectoryAsync = async () : Promise<string> => {\r\n        const urlGetDirectory = 'https://localhost:7145/command/getDirectory'\r\n        const responce = await fetch(urlGetDirectory, this.header.GET);\r\n        \r\n        return await responce.text()\r\n    }\r\n    \r\n    subDirectoriesAsync = async () : Promise<string[]> => {\r\n        const urlGetDirectories = 'https://localhost:7145/command/getDirectories'\r\n        const responce = await fetch(urlGetDirectories,this.header.GET)\r\n        const responceJson = await responce.json()\r\n        const result = await responceJson as string[]\r\n\r\n        return result\r\n    }\r\n\r\n    getHistoryAsync = async () : Promise<IHistory[]> => {\r\n        const urlGetHistory = 'https://localhost:7145/command/getHistory'\r\n        const response = await fetch(urlGetHistory,{\r\n            headers:{\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'Authorization':  this.token\r\n        },  credentials: 'include'\r\n        })\r\n        const responceJson = await response.json()\r\n        const result = await responceJson as IHistory[]\r\n\r\n        return result\r\n    }\r\n\r\n    stopCommandAsync = async () : Promise<void> => {\r\n\r\n        const urlStopCommand = 'https://localhost:7145/command/Stop'\r\n        await fetch(urlStopCommand, {\r\n            method: 'POST',\r\n            redirect: 'follow',\r\n            body: JSON.stringify(null),\r\n            headers: {  \r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json', \r\n                'Authorization':  this.token\r\n            },\r\n             credentials: 'include'\r\n        })\r\n    }\r\n}\r\n\r\nexport const instanceRepository = (token : string) : Repository=>  {\r\n    return new Repository(token)\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}